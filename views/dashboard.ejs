<h1>Panel de Monitoreo</h1>
<% if (session && (session.rol === 'admin' || session.rol === 'operador')) { %>
  <a href="/devices/add">Agregar Dispositivo</a>
<% } %>
<table border="1">
  <tr>
    <th>ID</th>
    <th>Tipo</th>
    <th>Batería</th>
    <th>Estado</th>
    <th>Ubicación</th>
    <th>Peso Máx (kg)</th>
    <% if (session && (session.rol === 'admin' || session.rol === 'operador')) { %>
      <th>Acciones</th>
    <% } %>
  </tr>
  <% dispositivos.forEach(d => { %>
    <tr>
      <td><%= d.id %></td>
      <td><%= d.tipo %></td>
      <td><%= d.bateria %>%</td>
      <td><%= d.estado %></td>
      <td><%= d.ubicacion.lat %>, <%= d.ubicacion.lon %></td>
      <td><%= d.capacidad && d.capacidad.pesoMax ? d.capacidad.pesoMax : '-' %></td>
      <% if (session && (session.rol === 'admin' || session.rol === 'operador')) { %>
        <td><a href="/devices/delete/<%= d.id %>" onclick="return confirm('¿Eliminar este dispositivo?')">Eliminar</a></td>
      <% } %>
    </tr>
  <% }) %>
</table>
